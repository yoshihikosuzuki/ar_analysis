# ar_analysis

プレスリリースのアブノーマルリターンに関する解析

### データ

`Reshape data.ipynb`で整形した。各種データ数等はipynbに記載してある。
今回の株価データには株価指数がTOPIXしかなかったので、解析対象は東証一部上場企業に限定した(`listed_company`自体には全ての上場企業が含まれている)。

* `pressrelease_all.csv`
 * 全てのプレスリリースのデータ(articleid, date, bodysubのタブ区切り)
* `listed_company`
 * 上場企業(企業名辞書で証券コードが存在する企業)のデータ(comp_name, address, sec_codeのタブ区切り)
* `kabuka_tse1`
 * 東証一部の株価データ(マーケットデータがTOPIXしかなかったので東証一部に限定した)
* `market_tse1`
 * TOPIXデータ
 
### プレスリリースと上場企業のマッチング

現状では、上場企業のデータをもとにプレスリリースに完全一致検索をかける方針で行っている。

1. 企業名は企業名辞書のものをそのまま使用し、完全一致でヒットとする
2. 住所は正規化して市区町村名だけを(最大2つ)抽出し、どれか1つでも完全一致したらヒットとする
 * 住所を記載する場合、都道府県名は無くても理解できる場合がああるが、市区町村名を全て書かないと意味がほとんどないという仮定に基づく
 * また、都道府県名だと関係のないヒットがありそうだが、市区町村名だとその可能性が低そうだという理由もある
 
#### 改善した方が良さそうな点

* 企業名の揺らぎ
 * 大文字小文字
 * 英語表記とカタカナ表記
 * `・`等
 * `株式会社`、`ホールディングス`等 -> 取り除いてから検索
* 住所の揺らぎ
 * プレスリリースから住所を表す部分だけを抽出して、正規化の結果同士で比較するのが最善ではありそう
* `headline`にしか企業名が含まれないものや、企業名だけで住所を含まないものが散見される
* 短くて複雑度の低い企業名で、かつ住所が都内だったりするとfalse-positive hitが起こりやすい -> 都内は区名の次まで検索？
